<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<title>Flores geométricas amarillas + lluvia TE AMO</title>
<style>
  :root{
    --yellow:#ffd000;
    --yellow2:#ffea7a;
    --green:#2e7d32;
    --leaf1:#79b55b;
    --leaf2:#2e7d32;
    --pink:#ffd2e8;
    --bg1:#060616;
    --bg2:#0a0a2a;
  }
  *{box-sizing:border-box; -webkit-tap-highlight-color: transparent;}
  html,body{height:100%;margin:0}
  body{font-family:Poppins,system-ui,-apple-system,Segoe UI,Roboto,sans-serif; color:#fff; overflow:hidden; background:#000}
  .app{position:relative; width:100vw; height:100vh; background: radial-gradient(1200px 560px at 50% -10%, #232365 0%, var(--bg2) 45%, var(--bg1) 75%, #000 100%);}
  @supports (height: 100svh){ .app{height:100svh} }

  /* Estrellas */
  .stars,.stars:before,.stars:after{ position:absolute; inset:0; content:""; display:block }
  .stars{ width:2px;height:2px; z-index:0; box-shadow:
    8vw 8vh #fff, 20vw 12vh #fff, 35vw 10vh #fff, 50vw 14vh #fff, 70vw 9vh #fff, 85vw 13vh #fff,
    10vw 30vh #fff, 25vw 33vh #fff, 40vw 31vh #fff, 60vw 36vh #fff, 78vw 34vh #fff, 92vw 30vh #fff,
    6vw 60vh #fff, 22vw 58vh #fff, 38vw 63vh #fff, 55vw 61vh #fff, 73vw 67vh #fff, 90vw 65vh #fff,
    12vw 86vh #fff, 28vw 90vh #fff, 46vw 88vh #fff, 66vw 92vh #fff, 88vw 89vh #fff;
    animation: twinkle 4s linear infinite;
  }
  .stars:before{ width:1px;height:1px; box-shadow:
    14vw 18vh #fff, 28vw 16vh #fff, 44vw 22vh #fff, 62vw 20vh #fff, 80vw 17vh #fff,
    16vw 46vh #fff, 32vw 42vh #fff, 48vw 45vh #fff, 68vw 40vh #fff, 88vw 44vh #fff,
    20vw 72vh #fff, 36vw 74vh #fff, 52vw 70vh #fff, 72vw 76vh #fff, 92vw 72vh #fff;
    animation: twinkle 6s linear infinite reverse;
  }
  .stars:after{ width:2px;height:2px; box-shadow:
    5vw 12vh #fff, 15vw 15vh #fff, 25vw 11vh #fff, 35vw 17vh #fff, 45vw 13vh #fff,
    55vw 16vh #fff, 65vw 12vh #fff, 75vw 14vh #fff, 85vw 10vh #fff, 95vw 16vh #fff;
    animation: twinkle 5.5s linear infinite;
  }
  @keyframes twinkle{ 50%{opacity:.35; transform:translateY(1px)} }

  /* Canvas */
  canvas#fx{ position:absolute; inset:0; width:100%; height:100%; z-index:1 }

  /* Mensajes */
  .msg{ position:absolute; inset:0; display:grid; place-items:center; text-align:center; z-index:2; opacity:0; transform:translateY(8px); transition:.8s ease; padding:0 6vw; pointer-events:none }
  .msg.show{ opacity:1; transform:none }
  .msg h1{ margin:0; font-weight:900; letter-spacing:.02em; text-transform:uppercase;
      font-size: clamp(28px, 8vw, 72px); color:var(--yellow);
      text-shadow: 0 0 22px rgba(255,208,0,.55), 0 0 70px rgba(255,200,0,.35); }
  .msg h2{ margin:.2em 0 0; font-weight:600; font-size:clamp(16px, 4.5vw, 30px) }

  /* Botón */
  .cta{ position:absolute; right:max(14px, env(safe-area-inset-right)); bottom:calc(max(14px, env(safe-area-inset-bottom)) + 2px);
        padding:.7rem 1rem; border-radius:999px; border:1px solid rgba(255,216,77,.55);
        color:#fff; background:linear-gradient(180deg, rgba(0,0,0,.15), rgba(0,0,0,.35));
        font-weight:600; letter-spacing:.02em; backdrop-filter:blur(6px); cursor:pointer; z-index:3; display:none }
</style>
</head>
<body>
  <div class="app" id="app">
    <div class="stars"></div>
    <canvas id="fx"></canvas>

    <!-- Mensajes -->
    <div class="msg" id="m1"><div><h1 style="line-height:1.2">Mi corazón me gustas más<br>cuando estas sin calzon</h1></div></div>
    <div class="msg" id="m2"><div><h2>Eres mi razón de sonreír</h2><h1>TE AMO</h1></div></div>
    <div class="msg" id="m3"><div><h2>Gracias por estar conmigo</h2><h1>SIEMPRE</h1></div></div>

    <button class="cta" id="replay">Repetir final ✨</button>
  </div>

<script>
function setAppHeight(){ const app = document.getElementById('app'); const vh = window.visualViewport ? window.visualViewport.height : window.innerHeight; app.style.height = vh + 'px'; }
setAppHeight(); addEventListener('resize', setAppHeight); if(window.visualViewport) visualViewport.addEventListener('resize', setAppHeight);

// Mensajes
const msgs=[document.getElementById('m1'), document.getElementById('m2'), document.getElementById('m3')];
let step=0, timer;
function showNextMessage(){ if(step>0) msgs[step-1].classList.remove('show'); if(step<msgs.length){ msgs[step].classList.add('show'); step++; timer=setTimeout(showNextMessage, 4400);} else { setTimeout(startFinale, 1200);}}

// Canvas
const cvs = document.getElementById('fx'); const ctx = cvs.getContext('2d', { alpha:true });
let W,H,DPR=Math.max(1, Math.min(2, window.devicePixelRatio||1));
function resizeCanvas(){ const r=cvs.getBoundingClientRect(); W=Math.floor(r.width*DPR); H=Math.floor(r.height*DPR); cvs.width=W; cvs.height=H; }
resizeCanvas(); addEventListener('resize', resizeCanvas);

// Objetos
class GeoFlower{
  constructor(x){ this.x=x; this.yBase=H+20; this.yTarget=(0.25+Math.random()*0.45)*H; this.t=0; this.phase=0;
    this.growDur=2600+Math.random()*1200; this.bloomDur=2000+Math.random()*1200; this.fadeDur=1400;
    this.petals=20; this.size=Math.min(W,H)/9+Math.random()*48; this.sway=(Math.random()*0.6-0.3);
    this.strokeLayers=12; this.yellowA='rgba(255,208,0,0.9)'; this.yellowB='rgba(255,234,122,0.6)';
    this.leafGrad=ctx.createLinearGradient(0,0,0,30); this.leafGrad.addColorStop(0,'#79b55b'); this.leafGrad.addColorStop(1,'#2e7d32'); }
  drawStem(ctx,g){ const x=this.x,y0=this.yBase,y1=this.yBase-(this.yBase-this.yTarget)*g; const cx=x+Math.sin(this.t*0.002)*this.sway*60;
    ctx.save(); ctx.lineWidth=6; ctx.strokeStyle='#2e7d32'; ctx.lineCap='round'; ctx.beginPath(); ctx.moveTo(x,y0); ctx.quadraticCurveTo(cx,(y0+y1)/2,x,y1); ctx.stroke();
    ctx.fillStyle=this.leafGrad; const leaf=(r,left)=>{ const ly=y0-(y0-y1)*r; const ang=(left?-1:1)*Math.PI/3.4; ctx.save(); ctx.translate(x,ly); ctx.rotate(ang+Math.sin(this.t*0.002+r*4)*0.08);
      const w=22,h=44; ctx.beginPath(); ctx.ellipse(18*(left?-1:1),0,w,h,0,0,Math.PI*2); ctx.fill(); ctx.restore(); };
    if(g>0.2) leaf(0.35,true); if(g>0.35) leaf(0.55,false); ctx.restore(); return {x, y:y1}; }
  drawPetalOutline(ctx,radius,scale){ const r=radius*scale,w=r*0.55,h=r*1.2; ctx.beginPath(); ctx.moveTo(0,-r);
    ctx.bezierCurveTo(w,-r-h*0.35,w*0.9,-r-h*0.8,0,-r-h); ctx.bezierCurveTo(-w*0.9,-r-h*0.8,-w,-r-h*0.35,0,-r); ctx.stroke(); }
  drawBloom(ctx,c,p){ ctx.save(); ctx.translate(c.x,c.y); const radius=(0.35+0.65*p)*this.size;
    for(let i=0;i<this.petals;i++){ const a=i*(Math.PI*2/this.petals); ctx.save(); ctx.rotate(a);
      for(let k=1;k<=this.strokeLayers;k++){ const s=0.35+(k/this.strokeLayers)*0.8; ctx.lineWidth=1; ctx.strokeStyle=k%2?this.yellowA:this.yellowB; this.drawPetalOutline(ctx,radius,s); } ctx.restore(); }
    ctx.lineWidth=3; ctx.strokeStyle='rgba(255,208,0,0.85)'; ctx.beginPath(); ctx.arc(0,0,radius*0.25,0,Math.PI*2); ctx.stroke(); ctx.restore(); }
  update(dt){ this.t+=dt; }
  draw(ctx){ if(this.phase===0){ const g=Math.min(1,this.t/this.growDur); const head=this.drawStem(ctx,g); if(g>=1){ this.phase=1; this.t=0; this.lastHead=head; } }
    else if(this.phase===1){ const head=this.lastHead||{x:this.x,y:this.yTarget}; const p=Math.min(1,this.t/this.bloomDur); this.drawStem(ctx,1); this.drawBloom(ctx,head,p); if(p>=1){ this.phase=2; this.t=0; } }
    else { const head=this.lastHead||{x:this.x,y:this.yTarget}; const fade=Math.max(0,1-this.t/this.fadeDur); ctx.save(); ctx.globalAlpha=fade; this.drawStem(ctx,1); this.drawBloom(ctx,head,1); ctx.restore(); } }
  get done(){ return this.phase===2 && this.t>this.fadeDur; } }
class LoveDrop{ constructor(){ this.reset(); this.prev=performance.now(); } reset(){ this.x=Math.random()*W; this.y=-20-Math.random()*H*0.3; this.vy=(H/2600)*(0.8+Math.random()*0.8); this.size=24+Math.random()*26; this.alpha=0.95; }
  draw(ctx,now){ const dt=Math.min(50,now-this.prev); this.prev=now; this.y+=this.vy*dt; if(this.y>H+80){ this.alpha-=0.01; } if(this.alpha<=0){ this.reset(); return; }
    ctx.save(); ctx.translate(this.x,this.y); ctx.shadowColor='rgba(255,210,230,0.35)'; ctx.shadowBlur=16; const px=Math.round(this.size*DPR); ctx.font=`900 ${px}px Poppins, system-ui, -apple-system, Segoe UI, Roboto, sans-serif`;
    ctx.textAlign='center'; ctx.textBaseline='middle'; const grad=ctx.createLinearGradient(0,-px/2,0,px/2); grad.addColorStop(0,`rgba(255,255,255,${this.alpha})`); grad.addColorStop(1,`rgba(255,210,232,${this.alpha})`);
    ctx.fillStyle=grad; ctx.fillText('TE AMO',0,0); ctx.restore(); } }

// Motor
let stems=[], drops=[], lastTime=performance.now();
function spawnStems(n=4){ for(let i=0;i<n;i++){ const x=(0.12+Math.random()*0.76)*W; stems.push(new GeoFlower(x)); } }
function ensureDrops(count=28){ while(drops.length<count) drops.push(new LoveDrop()); }
function loop(){ const now=performance.now(); const dt=Math.min(50,now-lastTime); lastTime=now; ctx.clearRect(0,0,W,H); ctx.fillStyle='rgba(255,216,77,0.03)'; ctx.fillRect(0,0,W,H);
  for(let i=0;i<drops.length;i++){ drops[i].draw(ctx,now); } for(let i=0;i<stems.length;i++){ stems[i].update(dt); stems[i].draw(ctx); } stems=stems.filter(s=>!s.done); requestAnimationFrame(loop); }
function startFinale(){ stems.length=0; drops.length=0; ensureDrops(36); loop(); let waves=5,i=0; (function wave(){ spawnStems(5); i++; if(i<waves) setTimeout(wave,1600); })();
  const rainInterval=setInterval(()=>{ ensureDrops(42); },400); setTimeout(()=>{ clearInterval(rainInterval); },10000); }

// Auto-start
window.addEventListener('load', ()=>{ showNextMessage(); });

</script>
</body>
</html>